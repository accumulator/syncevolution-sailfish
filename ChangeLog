2006-06-01  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/normalize_vcard.pl:
	adapted to syncing with sync.scheduleworld.com

	* src/EvolutionContactSource.cpp:
	added mapping for ADR;TYPE=OTHER for scheduleworld

	* etc/Makefile.am, etc/localhost_1/spds/syncml/config.txt:
	updated references to sync.scheduleworld.com

	* etc/localhost_1/spds/sources/addressbook_1/config.txt:
	comments explain how to obtain valid Evolution sources

2006-05-29  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionCalendarSource.cpp, src/EvolutionSyncSource.cpp:
	better error logging

	* src/testVCard.vcf: fixed typo

	* src/testCalendar.ics: adapted to scheduleworld.com

	* src/normalize_vcard.pl:
	use simpler diff output and transform into side-by-side oneself (simpler code, less fragile, handles UTF-8)

2006-05-28  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/Test.h, src/TestEvolution.cpp, src/TestMain.cpp:
	avoid filenames with colons in the name

2006-05-27  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/normalize_vcard.pl:
	adapt automatically to console size if tput is available

	* src/normalize_vcard.pl, README:
	made the diff output nicer: full items shown, separated by lines

2006-05-26  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/normalize_vcard.pl:
	massage the full diff output so that it is easier to read and contains exactly the full vcard/vcalendar for each change

	* src/normalize_vcard.pl:
	added indention for nested BEGIN/END blocks in iCalendar

	* HACKING, src/EvolutionCalendarSource.cpp, src/EvolutionContactSource.cpp, src/EvolutionSmartPtr.h, src/EvolutionSyncClient.cpp, src/EvolutionSyncSource.cpp, src/EvolutionSyncSource.h, src/TestEvolution.cpp, src/syncevolution.cpp:
	cleaned up error reporting and exception handling

2006-05-25  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README, src/EvolutionCalendarSource.cpp, src/EvolutionContactSource.cpp, src/EvolutionSyncClient.cpp, src/EvolutionSyncSource.cpp, src/EvolutionSyncSource.h:
	cleaned up error handling and logging, in particular when using multiple sources at once

	* configure.in: avoid copying temporary C++ API files

	* src/testVCard.vcf: added buffer overflow test case

	* src/EvolutionSyncSource.cpp, src/TestEvolution.cpp:
	added test for slow-sync and added handling of the STC_ALREADY_EXISTS encountered then; twinning is currently broken in Funambol 3.0 beta 3, see #305357

	* README: added remark that text has to be exchanged as UTF-8

	* src/testVCard.vcf:
	added test case with explicit CHARSET="UTF-8" to test how the updated client library deals with it

2006-05-24  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionSyncClient.cpp: utility was renamed

2006-05-05  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionCalendarSource.cpp: fixed new[]/free() mismatch

2006-05-01  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionCalendarSource.cpp, src/EvolutionCalendarSource.h:
	generate iCalendar items with VTIMEZONE definitions

	* README: added scheduleworld as preferred server

2006-04-26  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* etc/Makefile.am, etc/localhost_1/spds/sources/addressbook_1/config.txt, src/EvolutionContactSource.cpp, src/EvolutionSyncSource.cpp:
	added possibility to choose between sending vCard 2.1 and 3.0

2006-04-24  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README: syncing multiple databases at the same time now worked okay

	* src/TestEvolution.cpp:
	avoid the problematic timezones in the basic tests

	* src/EvolutionCalendarSource.cpp:
	write the required PRODID and VERSION for iCalendar entries

	* src/normalize_vcard.pl: avoid eating the trailing newline after PHOTO

	* HACKING, etc/Makefile.am, etc/localhost_1/spds/syncml/config.txt, src/TestEvolution.cpp, src/normalize_vcard.pl:
	added support for testing against www.scheduleworld.com

	* src/normalize_vcard.pl: fixed the fix of EMAIL normalization...

	* src/normalize_vcard.pl:
	hide differences due to different PHOTO parameters, fixed EMAIL;INTERNET;OTHER

2006-04-23  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* etc/Makefile.am, README:
	avoid problems with ChangeSourceUriSynclet by using sc-pim-ppc for second client

	* src/EvolutionContactSource.cpp: also treat INTERNET as TYPE

2006-04-17  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/Makefile.am, src/TestEvolution.cpp, src/testTask.ics:
	added testing of tasks

	* HACKING: test names have changed

	* README: added warnings about known-problems

	* src/testCalendar.ics:
	temporarily removed some problematic characters (forge tracker #304786)

	* README, src/Makefile.am, src/TestEvolution.cpp, src/TestMain.cpp:
	- renamed normalize script to synccompare because it now applies to both calendar, tasks and contacts
	- temporary files in test suite now start with the name of the test they belong to

	* src/EvolutionCalendarSource.cpp, src/EvolutionCalendarSource.h, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSyncSource.cpp, src/EvolutionSyncSource.h, src/Makefile.am, src/TestEvolution.cpp, src/testCalendar.ics, src/testTask.ics:
	- renamed "test" program to "TestEvolution"
	- copy original test cases to fit the name expected by TestEvolution and to have
	  them in the build directory
	- handle merge with existing item in addItem(): return special status

	* src/normalize_vcard.pl: now also handles calendar comparison

2006-04-14  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionCalendarSource.h:
	added some support for inserting already existing item

	* src/TestEvolution.cpp: instantiate test for calendar

	* src/EvolutionCalendarSource.cpp:
	added some support for inserting already existing item

2006-04-12  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/TestEvolution.cpp:
	refactored code so that test suites can be built from the base template TestEvolution class:
	currently defined are ContactSource (local tests) and ContactSync (synchronization with server), tests work exactly as before

	* src/EvolutionContactSource.cpp:
	text/x-vcard is more suitable for vcard 2.1

2006-04-09  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/TestEvolution.cpp:
	made sleep configurable (off by default), synchronize only one source

	* src/EvolutionCalendarSource.cpp, src/EvolutionCalendarSource.h, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSmartPtr.h, src/EvolutionSyncClient.cpp, src/EvolutionSyncClient.h, src/EvolutionSyncSource.cpp, src/EvolutionSyncSource.h, src/Makefile.am, src/TestEvolution.cpp, src/syncevolution.cpp, etc/Makefile.am, etc/localhost_1/spds/sources/addressbook_1/config.txt, README, configure.in:
	- added support for calendars and tasks: not yet tested automatically
	  but manual tests show that it works in principle, albeit with some
	  loss of attributes in the server for calendars (time zone)
	- removed "disabled" configuration option, use "sync = none" instead
	- added selection of databases to synchronize via additional command
	  line parameters

	Source:
	- Refactored code so that EvolutionSyncSource contains the client-library
	  facing code and commong logging/error handling. EvolutionContactSource
	  and EvolutionCalendarSource (for both calendars and tasks) can now
	  indicate errors via exceptions in all functions.

2006-04-06  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README, configure.in, src/EvolutionContactSource.cpp, src/EvolutionSyncClient.cpp, src/EvolutionSyncClient.h, src/EvolutionSyncSource.h, src/TestEvolution.cpp, src/syncevolution.cpp:
	adapted to head revision of Sync4j C++ client library

	* src/Makefile.am: testVCard.vcf was missing in source distribution

2006-03-26  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/sync4j-client-api-sdkcpp_3_0_6a.diff:
	fix for #304805: testing return code of SyncClient::beginSync()

2006-03-19  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* NEWS, README, configure.in, etc/localhost_1/spds/syncml/config.txt, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSyncClient.cpp, src/EvolutionSyncClient.h, src/EvolutionSyncSource.h, src/Makefile.am, src/syncevolution.cpp:
	- implemented automatic backups, logging and database comparison
	- prepared 0.2 release

	* src/EvolutionContactSource.cpp:
	set TYPE=OTHER also for EMAIL if no other type found

	* src/normalize_vcard.pl:
	ignore some more irrelevant vcard differences (TYPE=PREF, extra separators)

	* src/sync4j-client-api-sdkcpp_3_0_6a.diff, src/testVCard.vcf:
	when using quoted-printable, also encode non-ASCII for consistency

2006-03-19  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* NEWS, README, configure.in, etc/localhost_1/spds/syncml/config.txt, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSyncClient.cpp, src/EvolutionSyncClient.h, src/EvolutionSyncSource.h, src/Makefile.am, src/syncevolution.cpp:
	- implemented automatic backups, logging and database comparison
	- prepared 0.2 release

	* src/EvolutionContactSource.cpp:
	set TYPE=OTHER also for EMAIL if no other type found

	* src/normalize_vcard.pl:
	ignore some more irrelevant vcard differences (TYPE=PREF, extra separators)

	* src/sync4j-client-api-sdkcpp_3_0_6a.diff, src/testVCard.vcf:
	when using quoted-printable, also encode non-ASCII for consistency

2006-03-18  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/Makefile.am, configure.in:
	make full copy of client lib C++ sources,
	added src/client-api-diff target to compare against original sources

	* src/sync4j-client-api-sdkcpp_3_0_6a.diff:
	changes for SyncEvolution not in Funambol CVS since sdkcpp_3_0_6a

	* src/TestMain.cpp: reset stdout/stderr before printing final result

	* src/EvolutionContactSource.cpp, src/EvolutionContactSource.h:
	ensure that unique properties occur not more than once

	* src/TestEvolution.cpp: test adding multiple business phone numbers

	* src/Makefile.am, src/TestEvolution.cpp, src/testVCard.vcf, src/.cvsignore, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSyncSource.h:
	test for copying via server now transmits testVCard.vcf and also compares against it

	* src/normalize_vcard.pl:
	format normalized vcards with 60 columns for easier side-by-side diff

2006-03-18  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionContactSource.cpp, src/EvolutionContactSource.h:
	ensure that unique properties occur not more than once

	* src/TestEvolution.cpp: test adding multiple business phone numbers

	* src/Makefile.am, src/TestEvolution.cpp, src/testVCard.vcf, src/.cvsignore, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSyncSource.h:
	test for copying via server now transmits testVCard.vcf and also compares against it

	* src/normalize_vcard.pl:
	format normalized vcards with 60 columns for easier side-by-side diff

2006-03-15  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/.cvsignore, src/Makefile.am, src/normalize_vcard.pl, README:
	normalize_vcard can now also compare two files automatically; it's also installed without .pl suffix

2006-03-12  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README, configure.in:
	update README and version in preparation for release

	* src/EvolutionContactSource.cpp, src/EvolutionContactSource.h:
	added workarounds for FBURL/CALURI and ADR without TYPE

	* src/.cvsignore, src/Makefile.am, src/TestEvolution.cpp, src/normalize_vcard.pl, README, configure.in:
	replaced verification with vcard comparion via normalize_vcard.pl

	* src/Makefile.am, etc/Makefile.am, .cvsignore, Makefile.am, autogen.sh:
	fixed maintainer-cleanup

	* .cvsignore, config.h.in, src/.cvsignore, src/Makefile.in, etc/.cvsignore, etc/Makefile.in, HACKING, Makefile.in, config.guess, config.sub, configure, depcomp, install-sh, ltmain.sh, missing, mkinstalldirs:
	removed pregenerated autotools files from CVS - use autogen.sh

	* src/.cvsignore, src/Makefile.am, src/Makefile.in, etc/Makefile.in, .cvsignore, HACKING, Makefile.am, Makefile.in, README, configure, configure.in:
	integrated compilation of Sync4j C++ client library + distribution of its source

2006-03-12  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README, configure.in:
	update README and version in preparation for release

	* src/EvolutionContactSource.cpp, src/EvolutionContactSource.h:
	added workarounds for FBURL/CALURI and ADR without TYPE

	* src/.cvsignore, src/Makefile.am, src/TestEvolution.cpp, src/normalize_vcard.pl, README, configure.in:
	replaced verification with vcard comparion via normalize_vcard.pl

	* src/Makefile.am, etc/Makefile.am, .cvsignore, Makefile.am, autogen.sh:
	fixed maintainer-cleanup

	* .cvsignore, config.h.in, src/.cvsignore, src/Makefile.in, etc/.cvsignore, etc/Makefile.in, HACKING, Makefile.in, config.guess, config.sub, configure, depcomp, install-sh, ltmain.sh, missing, mkinstalldirs:
	removed pregenerated autotools files from CVS - use autogen.sh

	* src/.cvsignore, src/Makefile.am, src/Makefile.in, etc/Makefile.in, .cvsignore, HACKING, Makefile.am, Makefile.in, README, configure, configure.in:
	integrated compilation of Sync4j C++ client library + distribution of its source

2006-03-11  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* aclocal.m4, autogen.sh, configure, configure.in, etc/Makefile.am, etc/Makefile.in, etc/localhost_1/spds/sources/addressbook_1/config.txt, src/.cvsignore, src/Makefile.am, src/Makefile.in, src/TestEvolution.cpp, src/normalize_vcard.pl, src/sync4jevolution.cpp, src/syncevolution.cpp, test/normalize_vcard.pl, .cvsignore, COPYING, HACKING, Makefile.am, Makefile.in, README:
	preparations for a release as 'SyncEvolution'

	* src/TestEvolution.cpp:
	restrict the usage of the problematic CALURI/FBURL to a few specific test cases

2006-03-11  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/TestEvolution.cpp:
	restrict the usage of the problematic CALURI/FBURL to a few specific test cases

2006-02-26  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/TestEvolution.cpp:
	check some more vcard fields (however, different order of entries still breaks comparison)

	* configure, configure.in:
	try most recent Evolution versions first, because shared objects are not upward-compatible

2006-02-04  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* ChangeLog:
	started to use emac's vc-update-change-log to update the ChangeLog

	* etc/localhost_1/spds/sources/addressbook_1/config.txt:
	added support for the new refresh-client/server sync modes

	* README: added known problems and support section, updated compiling

	* src/EvolutionContactSource.cpp, src/EvolutionSyncSource.h, src/TestEvolution.cpp:
	added support for the new refresh-client/server sync modes

2006-02-04  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README: added known problems and support section, updated compiling

	* etc/localhost_1/spds/sources/addressbook_1/config.txt,
	  src/EvolutionContactSource.cpp, src/EvolutionSyncSource.h, src/TestEvolution.cpp:
	added support for the new refresh-client/server sync modes

2006-01-26  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README: added POHLY-SYNC4JEVOLUTION-CHECKED

2006-01-23  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionContactSource.cpp: removed redundant code

	* README, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/TestEvolution.cpp:
	added conflict handling

2006-01-21  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* HACKING, src/TestMain.cpp: allow running just one test

	* src/TestEvolution.cpp, README:
	list the major features explicitly and improved tests to actually check copying/updating

	* HACKING: mention setup of unit testing

	* README: update to reflect current status

	* src/TestEvolution.cpp: minor changes to make it easier to debug

2006-01-08  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/TestEvolution.cpp:
	added test cases for vcard conversion
	use VOCL classes to fix vcard encoding

2005-12-12  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionContactSource.cpp:
	a deleted item without data returns getDataSize() -1

2005-12-11  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* HACKING, src/.cvsignore, src/EvolutionContactSource.cpp, src/EvolutionSyncClient.cpp, src/EvolutionSyncClient.h, src/TestEvolution.cpp:
	added unit testing for syncing, needs some support in core classes (overriding sync mode, full lists)

2005-12-10  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionContactSource.cpp, src/EvolutionSyncSource.h:
	implemented distinction between different sync modes: 'refresh' requires deleting items, scanning is different for full and partial sync

	* etc/.cvsignore, etc/Makefile.am, etc/Makefile.in, etc/localhost_1/spds/sources/addressbook_1/config.txt, etc/localhost_1/spds/syncml/config.txt, src/Makefile.in, test/normalize_vcard.pl, Makefile.am, Makefile.in, README, aclocal.m4, configure, configure.in:
	added testing of syncing

	* src/EvolutionContactSource.cpp, src/EvolutionSyncSource.h:
	added some more debug logging

2005-12-04  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionContactSource.cpp: more convervative logging

2005-12-03  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* src/EvolutionSyncClient.cpp, src/sync4jevolution.cpp:
	fixed/extended error detection at the end of the sync

	* src/EvolutionContactSource.cpp, src/EvolutionContactSource.h:
	added logging of contact vcards
	added hack to make Evolution's vcard V3.0 compatible with Sync4j 2.3b3 (needs to be remove or made configurable)

	* src/EvolutionSyncSource.cpp:
	strip special characters, Evolution gets confused by them

2005-11-26  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* README, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSyncClient.cpp, src/EvolutionSyncClient.h, src/EvolutionSyncSource.cpp, src/EvolutionSyncSource.h, src/Makefile.am, src/Makefile.in, src/TestEvolution.cpp, src/sync4jevolution.cpp:
	implemented front-end based on new SyncML C++ config API
	implemented the new begin/endSync() callbacks
	explain the change tracking and error handling
	-> copying from server works, the other way around fails, probably because of vcard 3.0 parsing problems on the server

2005-11-25  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* INSTALL, README, configure, configure.in, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/TestEvolution.cpp, src/sync4jevolution.cpp:
	adapted to Sync4j C++ client API 3.x

	* src/EvolutionSyncSource.cpp, src/EvolutionSyncSource.h:
	base class with functionality common to all Evolution sync sources

2005-11-05  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* .cvsignore, HACKING, README, src/.cvsignore, src/EvolutionContactSource.cpp, src/EvolutionContactSource.h, src/EvolutionSmartPtr.h, src/Makefile.am, src/Makefile.in, src/TestEvolution.cpp, src/TestMain.cpp, src/sync4jevolution.cpp, src/valgrind.supp:
	first working version of SyncSource for Evolution contacts (requires Sync4j C++ API 2.0, not currently available)
	added unit testing

2005-10-08  Patrick Ohly  <Patrick.Ohly@gmx.de>

	* .cvsignore, AUTHORS, COPYING, ChangeLog, INSTALL, Makefile.am, Makefile.in, NEWS, README, aclocal.m4, config.guess, config.h.in, config.sub, configure, configure.in, depcomp, install-sh, ltmain.sh, missing, mkinstalldirs, src/.cvsignore, src/Makefile.am, src/Makefile.in, src/sync4jevolution.cpp:
	setup framework


